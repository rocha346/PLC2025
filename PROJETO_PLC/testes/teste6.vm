START
PUSHN 4
JUMP main
PMostrarSoma:
PUSHL -2
PUSHL -1
ADD
STOREL 0
PUSHS "Soma dentro do procedure: "
WRITES
PUSHL 0
WRITEI
WRITELN
RETURN
PAlterarX:
PUSHS "... A executar procedure AlterarX ..."
WRITES
WRITELN
PUSHI 100
STOREG 0
RETURN
main:
PUSHS "--- INICIO DO TESTE ---"
WRITES
WRITELN
PUSHI 10
STOREG 0
PUSHI 20
STOREG 1
PUSHS "Valor original de x: "
WRITES
PUSHG 0
WRITEI
WRITELN
PUSHG 0
STOREG 2
PUSHS "Valor de temp (copia de x): "
WRITES
PUSHG 2
WRITEI
WRITELN
PUSHG 0
PUSHG 1
PUSHA PMostrarSoma
CALL
POP 2
PUSHA PAlterarX
CALL
PUSHS "Valor de x apos AlterarX (esperado 100): "
WRITES
PUSHG 0
WRITEI
WRITELN
PUSHS "--- Teste Repeat Until (5 a 1) ---"
WRITES
WRITELN
PUSHI 5
STOREG 3
L1:
PUSHG 3
WRITEI
WRITELN
PUSHG 3
PUSHI 1
SUB
STOREG 3
PUSHG 3
PUSHI 0
EQUAL
JZ L1
PUSHG 0
PUSHI 100
EQUAL
PUSHG 2
PUSHI 10
EQUAL
AND
JZ L2
PUSHS "SUCESSO: Todas as validacoes estao corretas."
WRITES
WRITELN
JUMP L3
L2:
PUSHS "ERRO: Alguma validacao falhou."
WRITES
WRITELN
L3:
PUSHS "--- FIM ---"
WRITES
WRITELN
STOP
